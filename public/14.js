(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{60:function(t,e,o){"use strict";o.r(e);var r={props:{value:Boolean},data:function(){return{open:!1,form:{nombre:"",apellido_paterno:"",apellido_materno:"",dni:"",codigo_modular:"10",cargo:"",estado:"activo"},errors:{}}},methods:{Submit:function(){var t=this;axios.post("/personas",this.form).then((function(e){t.$parent.getData(),t.open=!1,t.$swal("Mensaje de operación","Datos registrados correctamente","success"),t.resetInputs()})).catch((function(e){t.errors=e.response.data.errors}))},resetInputs:function(){this.form.nombre="",this.form.apellido_paterno="",this.form.apellido_materno="",this.form.dni="",this.form.codigo_modular="10",this.form.cargo="",this.form.estado="activo",this.errors={}},show:function(){this.open=!0},close:function(){this.open=!1,this.resetInputs()}},computed:{getCodigoModular:function(){return this.form.codigo_modular="10"+this.form.dni}}},a=o(6),s=Object(a.a)(r,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-layout",{attrs:{row:"","justify-center":""}},[o("v-dialog",{attrs:{persistent:"",small:"",width:"800px"},model:{value:t.open,callback:function(e){t.open=e},expression:"open"}},[o("v-card",[o("form",{on:{submit:function(e){return e.preventDefault(),t.Submit(e)}}},[o("v-card-title",{staticClass:"blue-grey darken-2 white--text",attrs:{wrap:""}},[o("v-flex",{attrs:{xs11:""}},[o("span",{staticClass:"headline"},[t._v("Registrar persona")])]),t._v(" "),o("v-flex",{staticClass:"d-flex justify-end",attrs:{xs1:""}},[o("v-btn",{attrs:{color:"error"},on:{click:function(e){return t.close()}}},[o("v-icon",[t._v("$vuetify.icons.close")])],1)],1)],1),t._v(" "),o("v-card-text",[o("v-container",{attrs:{"grid-list-md":""}},[o("v-layout",{attrs:{wrap:""}},[o("v-flex",{attrs:{xs12:"",sm6:""}},[o("v-text-field",{attrs:{label:"Nombre",required:"","error-messages":t.errors.nombre},model:{value:t.form.nombre,callback:function(e){t.$set(t.form,"nombre",e)},expression:"form.nombre"}})],1),t._v(" "),o("v-flex",{attrs:{xs12:"",sm6:""}},[o("v-text-field",{attrs:{label:"Apellido Paterno",required:"","error-messages":t.errors.apellido_paterno},model:{value:t.form.apellido_paterno,callback:function(e){t.$set(t.form,"apellido_paterno",e)},expression:"form.apellido_paterno"}})],1),t._v(" "),o("v-flex",{attrs:{xs12:"",sm6:""}},[o("v-text-field",{attrs:{label:"Apellido Materno",required:"","error-messages":t.errors.apellido_materno},model:{value:t.form.apellido_materno,callback:function(e){t.$set(t.form,"apellido_materno",e)},expression:"form.apellido_materno"}})],1),t._v(" "),o("v-flex",{attrs:{xs12:"",sm6:""}},[o("v-text-field",{attrs:{label:"El DNI",required:"",maxlength:"8","error-messages":t.errors.dni},model:{value:t.form.dni,callback:function(e){t.$set(t.form,"dni",e)},expression:"form.dni"}})],1),t._v(" "),o("v-flex",{attrs:{xs12:"",sm6:""}},[o("v-text-field",{attrs:{label:"Código Modular",required:"",maxlength:"10","error-messages":t.errors.codigo_modular},model:{value:t.getCodigoModular,callback:function(e){t.getCodigoModular=e},expression:"getCodigoModular"}})],1),t._v(" "),o("v-flex",{attrs:{xs12:"",sm6:""}},[o("v-text-field",{attrs:{label:"Cargo",required:"","error-messages":t.errors.cargo},model:{value:t.form.cargo,callback:function(e){t.$set(t.form,"cargo",e)},expression:"form.cargo"}})],1),t._v(" "),o("v-flex",{attrs:{xs12:""}},[o("v-radio-group",{attrs:{row:"","error-messages":t.errors.estado},model:{value:t.form.estado,callback:function(e){t.$set(t.form,"estado",e)},expression:"form.estado"}},[o("v-radio",{attrs:{label:"Activo",value:"activo",color:"success"}}),t._v(" "),o("v-radio",{attrs:{label:"Sobreviviente",value:"sobreviviente",color:"info"}}),t._v(" "),o("v-radio",{attrs:{label:"Cesante",value:"cesante",color:"error"}})],1)],1)],1)],1),t._v(" "),o("small",[t._v("Ingrese los campos obligatorios.")])],1),t._v(" "),o("v-card-actions",[o("v-spacer"),t._v(" "),o("v-btn",{attrs:{color:"error"},on:{click:function(e){return t.close()}}},[t._v("Cancelar")]),t._v(" "),o("v-btn",{attrs:{color:"success",type:"submit"}},[t._v("Guardar")])],1)],1)])],1)],1)}),[],!1,null,null,null).exports,i={props:{value:Boolean},data:function(){return{open:!1,form:{id:"",nombre:"",apellido_paterno:"",apellido_materno:"",dni:"",codigo_modular:"10",cargo:"",estado:"activo"},errors:{}}},methods:{Submit:function(){var t=this;axios.put("/personas/".concat(this.form.id),{params:{persona_id:this.form.id}}).then((function(e){t.$parent.getData(),t.open=!1,t.$swal("Mensaje de operación","Datos editados correctamente","success")})).catch((function(e){t.errors=e.response.data.errors}))},show:function(){this.open=!0,this.errors={}}},computed:{getCodigoModular:function(){return this.form.codigo_modular="10"+this.form.dni}}},n={components:{ModalAgregar:s,ModalEditar:Object(a.a)(i,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-layout",{attrs:{row:"","justify-center":""}},[o("v-dialog",{attrs:{persistent:"",small:"",width:"800px"},model:{value:t.open,callback:function(e){t.open=e},expression:"open"}},[o("v-card",[o("form",{on:{submit:function(e){return e.preventDefault(),t.Submit(e)}}},[o("v-card-title",{staticClass:"blue-grey darken-2 white--text",attrs:{wrap:""}},[o("v-flex",{attrs:{xs11:""}},[o("span",{staticClass:"headline"},[t._v("Editar persona")])]),t._v(" "),o("v-flex",{staticClass:"d-flex justify-end",attrs:{xs1:""}},[o("v-btn",{attrs:{color:"error"},on:{click:function(e){t.open=!1}}},[o("v-icon",[t._v("$vuetify.icons.close")])],1)],1)],1),t._v(" "),o("v-card-text",[o("v-container",{attrs:{"grid-list-md":""}},[o("v-layout",{attrs:{wrap:""}},[o("v-flex",{attrs:{xs12:"",sm6:""}},[o("v-text-field",{attrs:{label:"Nombre",required:"","error-messages":t.errors.nombre},model:{value:t.form.nombre,callback:function(e){t.$set(t.form,"nombre",e)},expression:"form.nombre"}})],1),t._v(" "),o("v-flex",{attrs:{xs12:"",sm6:""}},[o("v-text-field",{attrs:{label:"Apellido Paterno",required:"","error-messages":t.errors.apellido_paterno},model:{value:t.form.apellido_paterno,callback:function(e){t.$set(t.form,"apellido_paterno",e)},expression:"form.apellido_paterno"}})],1),t._v(" "),o("v-flex",{attrs:{xs12:"",sm6:""}},[o("v-text-field",{attrs:{label:"Apellido Materno",required:"","error-messages":t.errors.apellido_materno},model:{value:t.form.apellido_materno,callback:function(e){t.$set(t.form,"apellido_materno",e)},expression:"form.apellido_materno"}})],1),t._v(" "),o("v-flex",{attrs:{xs12:"",sm6:""}},[o("v-text-field",{attrs:{label:"El DNI",required:"",maxlength:"8","error-messages":t.errors.dni},model:{value:t.form.dni,callback:function(e){t.$set(t.form,"dni",e)},expression:"form.dni"}})],1),t._v(" "),o("v-flex",{attrs:{xs12:"",sm6:""}},[o("v-text-field",{attrs:{label:"Código Modular",required:"",maxlength:"10","error-messages":t.errors.codigo_modular},model:{value:t.getCodigoModular,callback:function(e){t.getCodigoModular=e},expression:"getCodigoModular"}})],1),t._v(" "),o("v-flex",{attrs:{xs12:"",sm6:""}},[o("v-text-field",{attrs:{label:"Cargo",required:"","error-messages":t.errors.cargo},model:{value:t.form.cargo,callback:function(e){t.$set(t.form,"cargo",e)},expression:"form.cargo"}})],1),t._v(" "),o("v-flex",{attrs:{xs12:""}},[o("v-radio-group",{attrs:{row:"","error-messages":t.errors.estado},model:{value:t.form.estado,callback:function(e){t.$set(t.form,"estado",e)},expression:"form.estado"}},[o("v-radio",{attrs:{label:"Activo",value:"activo",color:"success"}}),t._v(" "),o("v-radio",{attrs:{label:"Sobreviviente",value:"sobreviviente",color:"info"}}),t._v(" "),o("v-radio",{attrs:{label:"Cesante",value:"cesante",color:"error"}})],1)],1)],1)],1),t._v(" "),o("small",[t._v("Ingrese los campos obligatorios.")])],1),t._v(" "),o("v-card-actions",[o("v-spacer"),t._v(" "),o("v-btn",{attrs:{color:"error"},on:{click:function(e){t.open=!1}}},[t._v("Cancelar")]),t._v(" "),o("v-btn",{attrs:{color:"success",type:"submit"}},[t._v("Guardar")])],1)],1)])],1)],1)}),[],!1,null,null,null).exports,EstadoChip:o(77).a},data:function(){return{search:"",estado:"activo",toggleActiveBtn:0,loading:!1,loadingData:!1,pagination:{},RowsPerPageItems:[9,15,25,{text:"Todos",value:-1}],selected:[],headers:[{text:"Codigo Modular",align:"left",sortable:!1,value:"codigo_modular"},{text:"Nombre completo",value:"apellido_paterno"},{text:"DNI",value:"dni"},{text:"Cargo",value:"cargo"},{text:"Estado",value:"estado"}],personas:[],showModalEdit:!1}},created:function(){this.$auth.can("personas.index")||this.$auth.isAdmin()?(document.title="Lista de Personas",this.getData()):this.$router.push("/admin/403")},mounted:function(){this.$root.agregarPersona=this.$refs.agregarPersona,this.$root.editarPersona=this.$refs.editarPersona},methods:{getData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/personas";this.loadingData=!0,axios.get(e,{params:{estado:this.estado}}).then((function(e){t.loadingData=!1,t.personas=e.data.personas})).catch((function(e){console.log(e),403==e.response.status&&t.$router.push("/admin/403")}))},filterBy:function(t){this.estado=t,this.getData()},modalAgregar:function(){this.$root.agregarPersona.show()},modalEditar:function(t){this.$root.editarPersona.show(),this.$root.editarPersona.form.id=t.id,this.$root.editarPersona.form.nombre=t.nombre,this.$root.editarPersona.form.apellido_paterno=t.apellido_paterno,this.$root.editarPersona.form.apellido_materno=t.apellido_materno,this.$root.editarPersona.form.dni=t.dni,this.$root.editarPersona.form.codigo_modular=t.codigo_modular,this.$root.editarPersona.form.cargo=t.cargo,this.$root.editarPersona.form.estado=t.estado},deleteData:function(t){var e=this;this.$swal({title:"¿Está seguro de eliminar el registro?",text:"Esta operación va a eliminar el registro",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Sí, eliminar"}).then((function(o){o.value&&axios.delete("/personas/".concat(t.id)).then((function(t){e.$swal("Mensaje de operación","La persona se eliminó correctamente","success"),e.getData()})).catch((function(t){console.log(t),403==t.response.status&&e.$router.push("/403")}))}))}},computed:{pages:function(){return null==this.pagination.rowsPerPage||null==this.pagination.totalItems?0:Math.ceil(this.pagination.totalItems/this.pagination.rowsPerPage)}}},l=Object(a.a)(n,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-container",[o("v-layout",{staticClass:"mb-3",attrs:{row:"",wrap:""}},[o("v-flex",{attrs:{xs12:""}},[o("v-card",[o("v-container",{attrs:{"fill-height":"",fluid:""}},[o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{attrs:{xs12:"",sm9:"",md9:""}},[o("span",{staticClass:"headline"},[t._v("Lista de personas")])]),t._v(" "),t.$auth.can("personas.create")||t.$auth.isAdmin()?o("v-flex",{attrs:{xs12:"",sm3:"",md3:"","justify-end":"",flexbox:""}},[o("v-btn",{attrs:{color:"primary"},on:{click:function(e){return e.stopPropagation(),t.modalAgregar(e)}}},[o("v-icon",[t._v("$vuetify.icons.add")]),t._v("Agregar persona\n              ")],1)],1):t._e()],1)],1),t._v(" "),o("v-container",{staticStyle:{"padding-bottom":"0","padding-top":"0"},attrs:{fluid:""}},[o("v-text-field",{attrs:{clearable:"",label:"Buscar",type:"text"},scopedSlots:t._u([{key:"prepend",fn:function(){return[o("v-icon",[t._v("$vuetify.icons.search")])]},proxy:!0},{key:"append",fn:function(){return[o("v-fade-transition",{attrs:{"leave-absolute":""}},[t.loading?o("v-progress-circular",{attrs:{size:"24",color:"info",indeterminate:""}}):t._e()],1)]},proxy:!0}]),model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t._v(" "),o("span",{staticClass:"mb-2"},[o("v-tooltip",{attrs:{bottom:""}},[o("v-icon",{attrs:{slot:"activator"},slot:"activator"},[t._v("$vuetify.icons.filter")]),t._v(" "),o("span",[t._v("Filtrar por estado")])],1),t._v(" "),o("v-btn-toggle",{attrs:{light:""},model:{value:t.toggleActiveBtn,callback:function(e){t.toggleActiveBtn=e},expression:"toggleActiveBtn"}},[o("v-btn",{attrs:{flat:"",color:"success"},on:{click:function(e){return t.filterBy("activo")}}},[t._v("Activos")]),t._v(" "),o("v-btn",{attrs:{flat:"",color:"info"},on:{click:function(e){return t.filterBy("sobreviviente")}}},[t._v("Sobrevivientes")]),t._v(" "),o("v-btn",{attrs:{flat:"",color:"error"},on:{click:function(e){return t.filterBy("cesante")}}},[t._v("Cesantes")])],1)],1)],1)],1)],1)],1),t._v(" "),o("v-layout",{attrs:{wrap:""}},[o("v-flex",{attrs:{xs12:""}},[o("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.personas,search:t.search,loading:t.loadingData,"rows-per-page-text":"Mostrar","no-data-text":"No hay registros","no-results-text":"No hay registros encontrados",pagination:t.pagination,"rows-per-page-items":t.RowsPerPageItems},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"items",fn:function(e){return[o("td",{staticClass:"text-xs-center"},[t._v(t._s(e.item.codigo_modular))]),t._v(" "),o("td",[t._v(t._s(e.item.apellido_paterno)+" "+t._s(e.item.apellido_materno)+", "+t._s(e.item.nombre))]),t._v(" "),o("td",{staticClass:"text-xs-center"},[t._v(t._s(e.item.dni))]),t._v(" "),o("td",{staticClass:"text-xs-center"},[t._v(t._s(e.item.cargo))]),t._v(" "),o("td",{staticClass:"text-xs-center"},[o("EstadoChip",{attrs:{estado:e.item.estado}})],1),t._v(" "),o("td",[t.$auth.can("personas.edit")||t.$auth.isAdmin()?o("v-tooltip",{attrs:{bottom:""}},[o("v-btn",{attrs:{slot:"activator",color:"info",fab:"",small:""},on:{click:function(o){return t.modalEditar(e.item)}},slot:"activator"},[o("v-icon",[t._v("$vuetify.icons.edit")])],1),t._v(" "),o("span",[t._v("Editar registro")])],1):t._e(),t._v(" "),t.$auth.can("personas.destroy")||t.$auth.isAdmin()?o("v-tooltip",{attrs:{bottom:""}},[o("v-btn",{attrs:{slot:"activator",color:"error",fab:"",small:""},on:{click:function(o){return t.deleteData(e.item)}},slot:"activator"},[o("v-icon",[t._v("$vuetify.icons.delete")])],1),t._v(" "),o("span",[t._v("Eliminar registro")])],1):t._e()],1)]}}])}),t._v(" "),o("div",{staticClass:"text-xs-center pt-2"},[o("v-pagination",{attrs:{length:t.pages},model:{value:t.pagination.page,callback:function(e){t.$set(t.pagination,"page",e)},expression:"pagination.page"}})],1)],1)],1),t._v(" "),o("modal-agregar",{ref:"agregarPersona"}),t._v(" "),o("modal-editar",{ref:"editarPersona"})],1)}),[],!1,null,null,null);e.default=l.exports},77:function(t,e,o){"use strict";var r={props:["estado"]},a=o(6),s=Object(a.a)(r,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("span",["activo"===t.estado?[o("v-chip",{staticClass:"text-capitalize",attrs:{"text-color":"white",color:"success",small:""}},[t._v(t._s(t.estado))])]:t._e(),t._v(" "),"cesante"===t.estado?[o("v-chip",{staticClass:"text-capitalize",attrs:{"text-color":"white",color:"error",small:""}},[t._v(t._s(t.estado))])]:t._e(),t._v(" "),"sobreviviente"===t.estado?[o("v-chip",{staticClass:"text-capitalize",attrs:{"text-color":"white",color:"info",small:""}},[t._v(t._s(t.estado))])]:t._e()],2)}),[],!1,null,null,null);e.a=s.exports}}]);