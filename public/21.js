(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{58:function(t,e,r){"use strict";r.r(e);var o={props:{value:Boolean},data:function(){return{open:!1,form:{nombre:"",identificador:"",descripcion:""},errors:{}}},methods:{Submit:function(){var t=this;axios.post("/roles",this.form).then((function(e){t.$parent.getData(),t.open=!1,t.$swal("Mensaje de operación","Datos registrados correctamente","success"),t.resetInputs()})).catch((function(e){t.errors=e.response.data.errors}))},resetInputs:function(){this.form.nombre="",this.form.identificador="",this.form.descripcion="",this.form.permissions=[],this.errors={}},show:function(){this.open=!0},close:function(){this.open=!1,this.resetInputs()}}},a=r(6),s={data:function(){return{open:!1,form:{id:"",nombre:"",identificador:"",descripcion:""},errors:{}}},methods:{Submit:function(){var t=this;axios.put("/roles/".concat(this.form.id),this.form).then((function(e){t.$parent.getData(),t.open=!1,t.$swal("Mensaje de operación","Datos editados correctamente","success")})).catch((function(e){t.errors=e.response.data.errors}))},show:function(){this.open=!0,this.errors={}}}},i={components:{ModalAgregar:Object(a.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-layout",{attrs:{row:"","justify-center":""}},[r("v-dialog",{attrs:{persistent:"",small:"",width:"800px"},model:{value:t.open,callback:function(e){t.open=e},expression:"open"}},[r("v-card",[r("form",{on:{submit:function(e){return e.preventDefault(),t.Submit(e)}}},[r("v-card-title",{staticClass:"blue-grey darken-2 white--text",attrs:{wrap:""}},[r("v-flex",{attrs:{xs11:""}},[r("span",{staticClass:"headline"},[t._v("Registrar rol")])]),t._v(" "),r("v-flex",{staticClass:"d-flex justify-end",attrs:{xs1:""}},[r("v-btn",{attrs:{color:"error"},on:{click:function(e){return t.close()}}},[r("v-icon",[t._v("$vuetify.icons.close")])],1)],1)],1),t._v(" "),r("v-card-text",[r("v-container",{attrs:{"grid-list-md":""}},[r("v-layout",{attrs:{wrap:""}},[r("v-flex",{attrs:{xs12:"",sm6:""}},[r("v-text-field",{attrs:{label:"El Identificador",required:"","error-messages":t.errors.identificador},model:{value:t.form.identificador,callback:function(e){t.$set(t.form,"identificador",e)},expression:"form.identificador"}})],1),t._v(" "),r("v-flex",{attrs:{xs12:"",sm6:""}},[r("v-text-field",{attrs:{label:"Nombre del rol",required:"","error-messages":t.errors.nombre},model:{value:t.form.nombre,callback:function(e){t.$set(t.form,"nombre",e)},expression:"form.nombre"}})],1),t._v(" "),r("v-flex",{attrs:{xs12:"",sm6:""}},[r("v-textarea",{attrs:{label:"Descripción",required:"","error-messages":t.errors.descripcion},model:{value:t.form.descripcion,callback:function(e){t.$set(t.form,"descripcion",e)},expression:"form.descripcion"}})],1)],1)],1),t._v(" "),r("small",[t._v("Ingrese los campos obligatorios.")])],1),t._v(" "),r("v-card-actions",[r("v-spacer"),t._v(" "),r("v-btn",{attrs:{color:"error"},on:{click:function(e){return t.close()}}},[t._v("Cancelar")]),t._v(" "),r("v-btn",{attrs:{color:"success",type:"submit"}},[t._v("Guardar")])],1)],1)])],1)],1)}),[],!1,null,null,null).exports,ModalEditar:Object(a.a)(s,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-layout",{attrs:{row:"","justify-center":""}},[r("v-dialog",{attrs:{persistent:"",small:"",width:"800px"},model:{value:t.open,callback:function(e){t.open=e},expression:"open"}},[r("v-card",[r("form",{on:{submit:function(e){return e.preventDefault(),t.Submit(e)}}},[r("v-card-title",{staticClass:"blue-grey darken-2 white--text",attrs:{wrap:""}},[r("v-flex",{attrs:{xs11:""}},[r("span",{staticClass:"headline"},[t._v("Editar rol")])]),t._v(" "),r("v-flex",{staticClass:"d-flex justify-end",attrs:{xs1:""}},[r("v-btn",{attrs:{color:"error"},on:{click:function(e){t.open=!1}}},[r("v-icon",[t._v("$vuetify.icons.close")])],1)],1)],1),t._v(" "),r("v-card-text",[r("v-container",{attrs:{"grid-list-md":""}},[r("v-layout",{attrs:{wrap:""}},[r("v-flex",{attrs:{xs12:"",sm6:""}},[r("v-text-field",{attrs:{label:"El Identificador",required:"","error-messages":t.errors.identificador},model:{value:t.form.identificador,callback:function(e){t.$set(t.form,"identificador",e)},expression:"form.identificador"}})],1),t._v(" "),r("v-flex",{attrs:{xs12:"",sm6:""}},[r("v-text-field",{attrs:{label:"Nombre del rol",required:"","error-messages":t.errors.nombre},model:{value:t.form.nombre,callback:function(e){t.$set(t.form,"nombre",e)},expression:"form.nombre"}})],1),t._v(" "),r("v-flex",{attrs:{xs12:"",sm6:""}},[r("v-textarea",{attrs:{label:"Descripción",required:"","error-messages":t.errors.descripcion},model:{value:t.form.descripcion,callback:function(e){t.$set(t.form,"descripcion",e)},expression:"form.descripcion"}})],1)],1)],1),t._v(" "),r("small",[t._v("Ingrese los campos obligatorios.")])],1),t._v(" "),r("v-card-actions",[r("v-spacer"),t._v(" "),r("v-btn",{attrs:{color:"error"},on:{click:function(e){t.open=!1}}},[t._v("Cancelar")]),t._v(" "),r("v-btn",{attrs:{color:"success",type:"submit"}},[t._v("Guardar")])],1)],1)])],1)],1)}),[],!1,null,null,null).exports},data:function(){return{search:"",loading:!1,loadingData:!1,pagination:{},RowsPerPageItems:[9,15,25,{text:"Todos",value:-1}],selected:[],headers:[{text:"Identificador",align:"left",sortable:!1,value:"slug"},{text:"Nombre del rol",value:"name"},{text:"Descripción",value:"description"}],roles:[]}},created:function(){this.$auth.can("roles.index")||this.$auth.isAdmin()?(document.title="Lista de Roles",this.getData()):this.$router.push("/admin/403")},mounted:function(){this.$root.agregarRol=this.$refs.agregarRol,this.$root.editarRol=this.$refs.editarRol},methods:{getData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/roles";this.loadingData=!0,axios.get(e).then((function(e){t.loadingData=!1,t.roles=e.data.roles})).catch((function(e){console.log(e),403==e.response.status&&t.$router.push("/admin/403")}))},modalAgregar:function(){this.$root.agregarRol.show()},modalEditar:function(t){this.$root.editarRol.show(),this.$root.editarRol.form.id=t.id,this.$root.editarRol.form.identificador=t.slug,this.$root.editarRol.form.nombre=t.name,this.$root.editarRol.form.descripcion=t.description,this.$root.editarRol.form.permissions=t.permissions},deleteData:function(t){var e=this;this.$swal({title:"¿Está seguro de eliminar el registro?",text:"Esta operación va a eliminar el registro",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Sí, eliminar"}).then((function(r){r.value&&axios.delete("/roles/".concat(t.id)).then((function(t){e.$swal("Mensaje de operación","El rol se eliminó correctamente","success"),e.getData()})).catch((function(t){console.log(t),403==t.response.status&&e.$router.push("/403")}))}))}},computed:{pages:function(){return null==this.pagination.rowsPerPage||null==this.pagination.totalItems?0:Math.ceil(this.pagination.totalItems/this.pagination.rowsPerPage)}}},n=Object(a.a)(i,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",[r("v-layout",{staticClass:"mb-3",attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-card",[r("v-container",{attrs:{"fill-height":"",fluid:""}},[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs12:"",sm9:"",md9:""}},[r("span",{staticClass:"headline"},[t._v("Lista de roles")])]),t._v(" "),t.$auth.can("roles.create")||t.$auth.isAdmin()?r("v-flex",{attrs:{xs12:"",sm3:"",md3:"","justify-end":"",flexbox:""}},[r("v-btn",{attrs:{color:"primary"},on:{click:function(e){return e.stopPropagation(),t.modalAgregar(e)}}},[r("v-icon",[t._v("$vuetify.icons.add")]),t._v("Agregar rol\n              ")],1)],1):t._e()],1)],1),t._v(" "),r("v-container",{staticStyle:{"padding-bottom":"0","padding-top":"0"},attrs:{fluid:""}},[r("v-text-field",{attrs:{clearable:"",label:"Buscar",type:"text"},scopedSlots:t._u([{key:"prepend",fn:function(){return[r("v-icon",[t._v("$vuetify.icons.search")])]},proxy:!0},{key:"append",fn:function(){return[r("v-fade-transition",{attrs:{"leave-absolute":""}},[t.loading?r("v-progress-circular",{attrs:{size:"24",color:"info",indeterminate:""}}):t._e()],1)]},proxy:!0}]),model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1)],1)],1),t._v(" "),r("v-layout",{attrs:{wrap:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.roles,search:t.search,loading:t.loadingData,"rows-per-page-text":"Mostrar","no-data-text":"No hay registros","no-results-text":"No hay registros encontrados",pagination:t.pagination,"rows-per-page-items":t.RowsPerPageItems},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"items",fn:function(e){return[r("td",{staticClass:"text-xs-center"},[t._v(t._s(e.item.slug))]),t._v(" "),r("td",[t._v(t._s(e.item.name))]),t._v(" "),r("td",[t._v(t._s(e.item.description))]),t._v(" "),r("td",[t.$auth.can("roles.edit")||t.$auth.isAdmin()?r("v-tooltip",{attrs:{bottom:""}},[r("v-btn",{attrs:{slot:"activator",color:"info",fab:"",small:""},on:{click:function(r){return t.modalEditar(e.item)}},slot:"activator"},[r("v-icon",[t._v("$vuetify.icons.edit")])],1),t._v(" "),r("span",[t._v("Editar registro")])],1):t._e(),t._v(" "),t.$auth.can("roles.destroy")||t.$auth.isAdmin()?r("v-tooltip",{attrs:{bottom:""}},[r("v-btn",{attrs:{slot:"activator",color:"error",fab:"",small:""},on:{click:function(r){return t.deleteData(e.item)}},slot:"activator"},[r("v-icon",[t._v("$vuetify.icons.delete")])],1),t._v(" "),r("span",[t._v("Eliminar registro")])],1):t._e()],1)]}}])}),t._v(" "),r("div",{staticClass:"text-xs-center pt-2"},[r("v-pagination",{attrs:{length:t.pages},model:{value:t.pagination.page,callback:function(e){t.$set(t.pagination,"page",e)},expression:"pagination.page"}})],1)],1)],1),t._v(" "),r("modal-agregar",{ref:"agregarRol"}),t._v(" "),r("modal-editar",{ref:"editarRol"})],1)}),[],!1,null,null,null);e.default=n.exports}}]);