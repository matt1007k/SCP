(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{207:function(t,s,e){var a={"./af":79,"./af.js":79,"./ar":80,"./ar-dz":81,"./ar-dz.js":81,"./ar-kw":82,"./ar-kw.js":82,"./ar-ly":83,"./ar-ly.js":83,"./ar-ma":84,"./ar-ma.js":84,"./ar-sa":85,"./ar-sa.js":85,"./ar-tn":86,"./ar-tn.js":86,"./ar.js":80,"./az":87,"./az.js":87,"./be":88,"./be.js":88,"./bg":89,"./bg.js":89,"./bm":90,"./bm.js":90,"./bn":91,"./bn.js":91,"./bo":92,"./bo.js":92,"./br":93,"./br.js":93,"./bs":94,"./bs.js":94,"./ca":95,"./ca.js":95,"./cs":96,"./cs.js":96,"./cv":97,"./cv.js":97,"./cy":98,"./cy.js":98,"./da":99,"./da.js":99,"./de":100,"./de-at":101,"./de-at.js":101,"./de-ch":102,"./de-ch.js":102,"./de.js":100,"./dv":103,"./dv.js":103,"./el":104,"./el.js":104,"./en-SG":105,"./en-SG.js":105,"./en-au":106,"./en-au.js":106,"./en-ca":107,"./en-ca.js":107,"./en-gb":108,"./en-gb.js":108,"./en-ie":109,"./en-ie.js":109,"./en-il":110,"./en-il.js":110,"./en-nz":111,"./en-nz.js":111,"./eo":112,"./eo.js":112,"./es":113,"./es-do":114,"./es-do.js":114,"./es-us":115,"./es-us.js":115,"./es.js":113,"./et":116,"./et.js":116,"./eu":117,"./eu.js":117,"./fa":118,"./fa.js":118,"./fi":119,"./fi.js":119,"./fo":120,"./fo.js":120,"./fr":121,"./fr-ca":122,"./fr-ca.js":122,"./fr-ch":123,"./fr-ch.js":123,"./fr.js":121,"./fy":124,"./fy.js":124,"./ga":125,"./ga.js":125,"./gd":126,"./gd.js":126,"./gl":127,"./gl.js":127,"./gom-latn":128,"./gom-latn.js":128,"./gu":129,"./gu.js":129,"./he":130,"./he.js":130,"./hi":131,"./hi.js":131,"./hr":132,"./hr.js":132,"./hu":133,"./hu.js":133,"./hy-am":134,"./hy-am.js":134,"./id":135,"./id.js":135,"./is":136,"./is.js":136,"./it":137,"./it-ch":138,"./it-ch.js":138,"./it.js":137,"./ja":139,"./ja.js":139,"./jv":140,"./jv.js":140,"./ka":141,"./ka.js":141,"./kk":142,"./kk.js":142,"./km":143,"./km.js":143,"./kn":144,"./kn.js":144,"./ko":145,"./ko.js":145,"./ku":146,"./ku.js":146,"./ky":147,"./ky.js":147,"./lb":148,"./lb.js":148,"./lo":149,"./lo.js":149,"./lt":150,"./lt.js":150,"./lv":151,"./lv.js":151,"./me":152,"./me.js":152,"./mi":153,"./mi.js":153,"./mk":154,"./mk.js":154,"./ml":155,"./ml.js":155,"./mn":156,"./mn.js":156,"./mr":157,"./mr.js":157,"./ms":158,"./ms-my":159,"./ms-my.js":159,"./ms.js":158,"./mt":160,"./mt.js":160,"./my":161,"./my.js":161,"./nb":162,"./nb.js":162,"./ne":163,"./ne.js":163,"./nl":164,"./nl-be":165,"./nl-be.js":165,"./nl.js":164,"./nn":166,"./nn.js":166,"./pa-in":167,"./pa-in.js":167,"./pl":168,"./pl.js":168,"./pt":169,"./pt-br":170,"./pt-br.js":170,"./pt.js":169,"./ro":171,"./ro.js":171,"./ru":172,"./ru.js":172,"./sd":173,"./sd.js":173,"./se":174,"./se.js":174,"./si":175,"./si.js":175,"./sk":176,"./sk.js":176,"./sl":177,"./sl.js":177,"./sq":178,"./sq.js":178,"./sr":179,"./sr-cyrl":180,"./sr-cyrl.js":180,"./sr.js":179,"./ss":181,"./ss.js":181,"./sv":182,"./sv.js":182,"./sw":183,"./sw.js":183,"./ta":184,"./ta.js":184,"./te":185,"./te.js":185,"./tet":186,"./tet.js":186,"./tg":187,"./tg.js":187,"./th":188,"./th.js":188,"./tl-ph":189,"./tl-ph.js":189,"./tlh":190,"./tlh.js":190,"./tr":191,"./tr.js":191,"./tzl":192,"./tzl.js":192,"./tzm":193,"./tzm-latn":194,"./tzm-latn.js":194,"./tzm.js":193,"./ug-cn":195,"./ug-cn.js":195,"./uk":196,"./uk.js":196,"./ur":197,"./ur.js":197,"./uz":198,"./uz-latn":199,"./uz-latn.js":199,"./uz.js":198,"./vi":200,"./vi.js":200,"./x-pseudo":201,"./x-pseudo.js":201,"./yo":202,"./yo.js":202,"./zh-cn":203,"./zh-cn.js":203,"./zh-hk":204,"./zh-hk.js":204,"./zh-tw":205,"./zh-tw.js":205};function i(t){var s=r(t);return e(s)}function r(t){if(!e.o(a,t)){var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}return a[t]}i.keys=function(){return Object.keys(a)},i.resolve=r,t.exports=i,i.id=207},55:function(t,s,e){"use strict";e.r(s);var a={props:["estado"]},i=e(6),r=Object(i.a)(a,(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("span",["creado"===t.estado?[e("v-chip",{staticClass:"text-capitalize",attrs:{"text-color":"white",color:"success",small:""}},[t._v(t._s(t.estado))])]:t._e(),t._v(" "),"eliminado"===t.estado?[e("v-chip",{staticClass:"text-capitalize",attrs:{"text-color":"white",color:"error",small:""}},[t._v(t._s(t.estado))])]:t._e()],2)}),[],!1,null,null,null).exports,o={data:function(){return{open:!1,form:{id:"",certificado:""},errors:{}}},methods:{Submit:function(){var t=this;axios.put("/historiales/".concat(this.form.id),this.form).then((function(s){t.$parent.getData(),t.open=!1,t.$swal("Mensaje de operación","El núm. de certificado se edito correctamente","success")})).catch((function(s){t.errors=s.response.data.errors,403==s.response.status&&t.$router.push("/403")}))},show:function(){this.open=!0,this.errors={}}}},n=Object(i.a)(o,(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("v-layout",{attrs:{row:"","justify-center":""}},[e("v-dialog",{attrs:{persistent:"",small:"",width:"800px"},model:{value:t.open,callback:function(s){t.open=s},expression:"open"}},[e("v-card",[e("form",{on:{submit:function(s){return s.preventDefault(),t.Submit(s)}}},[e("v-card-title",{staticClass:"blue-grey darken-2 white--text",attrs:{wrap:""}},[e("v-flex",{attrs:{xs11:""}},[e("span",{staticClass:"headline"},[t._v("Editar el certificado")])]),t._v(" "),e("v-flex",{staticClass:"d-flex justify-end",attrs:{xs1:""}},[e("v-btn",{attrs:{color:"error"},on:{click:function(s){t.open=!1}}},[e("v-icon",[t._v("$vuetify.icons.close")])],1)],1)],1),t._v(" "),e("v-card-text",[e("v-container",{attrs:{"grid-list-md":""}},[e("v-layout",{attrs:{wrap:""}},[e("v-flex",{attrs:{xs12:""}},[e("v-text-field",{attrs:{label:"Núm. de Certificado",required:"","error-messages":t.errors.certificado},model:{value:t.form.certificado,callback:function(s){t.$set(t.form,"certificado",s)},expression:"form.certificado"}})],1)],1)],1)],1),t._v(" "),e("v-card-actions",[e("v-spacer"),t._v(" "),e("v-btn",{attrs:{color:"error"},on:{click:function(s){t.open=!1}}},[t._v("Cancelar")]),t._v(" "),e("v-btn",{attrs:{color:"success",type:"submit"}},[t._v("Guardar")])],1)],1)])],1)],1)}),[],!1,null,null,null).exports,c=e(75),l=e.n(c),d={components:{EstadoChip:r,ModalEditar:n},data:function(){return{search:"",loading:!1,loadingData:!1,pagination:{},RowsPerPageItems:[9,15,25,{text:"Todos",value:-1}],selected:[],headers:[{text:"N°. Certificado",value:"certificado",sortable:!0},{text:"Año",align:"left",sortable:!0,value:"anio"},{text:"El Mes o Meses",value:"meses"},{text:"DNI de la persona",value:"dni"},{text:"DNI del responsable",value:"dni_user"},{text:"Fecha de entrega",value:"created_at",sortable:!0}],historiales:[]}},created:function(){this.$auth.can("historiales.index")||this.$auth.isAdmin()?(document.title="Lista de constancias",this.getData()):this.$router.push("/admin/403")},mounted:function(){this.$root.editarCertificado=this.$refs.editarCertificado},methods:{getData:function(){var t=this,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/historiales";this.loadingData=!0,axios.get(s).then((function(s){t.loadingData=!1,t.historiales=s.data.historiales})).catch((function(s){console.log(s),403==s.response.status&&t.$router.push("/admin/403")}))},formatDateTime:function(t){return l()(t).locale("es").format("llll a")},deleteData:function(t){var s=this;this.$swal({title:"¿Está seguro de eliminar el registro?",text:"Esta operación va a eliminar el registro",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Sí, eliminar"}).then((function(e){e.value&&axios.delete("/historiales/".concat(t.id)).then((function(t){s.$swal("Mensaje de operación","El historial se eliminó correctamente","success"),s.getData()})).catch((function(t){403==t.response.status&&s.$router.push("/403")}))}))},certificadoEdit:function(t){this.$root.editarCertificado.show(),this.$root.editarCertificado.form.id=t.id,this.$root.editarCertificado.form.certificado=t.certificado},viewPDF:function(t){var s=t.anio,e=t.meses,a=t.persona_id,i=t.certificado,r=t.tipo;if("rango"==r){var o=s.split("-"),n={anio_anterior:o[0],anio_actual:o[1],persona_id:a,certificado:i,ver:1},c=window.btoa(JSON.stringify(n));window.open("/reporte/por-anios/".concat(c),"_blank")}if("anio"==r){var l={anio:s,persona_id:a,certificado:i,ver:1},d=window.btoa(JSON.stringify(l));window.open("/reporte/por-anio/".concat(d),"_blank")}if("mes"==r){var u={anio:s,mes:e,persona_id:a,certificado:i,ver:1},v=window.btoa(JSON.stringify(u));window.open("/reporte/por-mes/".concat(v),"_blank")}}},computed:{pages:function(){return null==this.pagination.rowsPerPage||null==this.pagination.totalItems?0:Math.ceil(this.pagination.totalItems/this.pagination.rowsPerPage)}}},u=Object(i.a)(d,(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("v-container",[e("v-layout",{staticClass:"mb-3",attrs:{row:"",wrap:""}},[e("v-flex",{attrs:{xs12:""}},[e("v-card",[e("v-container",{attrs:{"fill-height":"",fluid:""}},[e("v-layout",{attrs:{row:"",wrap:""}},[e("v-flex",{attrs:{xs12:""}},[e("span",{staticClass:"headline"},[t._v("Lista de Historial de Constancias")])])],1)],1),t._v(" "),e("v-container",{staticStyle:{"padding-bottom":"0","padding-top":"0"},attrs:{fluid:""}},[e("v-text-field",{attrs:{clearable:"",label:"Buscar",type:"text",placeholder:"Buscar por número de certificado..."},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("v-icon",[t._v("$vuetify.icons.search")])]},proxy:!0},{key:"append",fn:function(){return[e("v-fade-transition",{attrs:{"leave-absolute":""}},[t.loading?e("v-progress-circular",{attrs:{size:"24",color:"info",indeterminate:""}}):t._e()],1)]},proxy:!0}]),model:{value:t.search,callback:function(s){t.search=s},expression:"search"}})],1)],1)],1)],1),t._v(" "),e("v-layout",{attrs:{wrap:""}},[e("v-flex",{attrs:{xs12:""}},[e("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.historiales,search:t.search,loading:t.loadingData,pagination:t.pagination,"rows-per-page-items":t.RowsPerPageItems,"rows-per-page-text":"Mostrar","no-data-text":"No hay registros","no-results-text":"No hay registros encontrados"},on:{"update:pagination":function(s){t.pagination=s}},scopedSlots:t._u([{key:"items",fn:function(s){return[e("td",{staticClass:"text-xs-center"},[t._v(t._s(s.item.certificado))]),t._v(" "),e("td",{staticClass:"text-xs-center"},[t._v(t._s(s.item.anio))]),t._v(" "),e("td",{staticClass:"text-xs-center"},[t._v(t._s(s.item.meses))]),t._v(" "),e("td",{staticClass:"text-xs-center"},[t._v(t._s(s.item.dni))]),t._v(" "),e("td",{staticClass:"text-xs-center"},[t._v(t._s(s.item.dni_user))]),t._v(" "),e("td",{staticClass:"text-xs-center"},[t._v(t._s(t.formatDateTime(s.item.created_at)))]),t._v(" "),t.$auth.isAdmin()?[e("td",{staticClass:"text-xs-center"},[e("EstadoChip",{attrs:{estado:s.item.estado}})],1)]:t._e(),t._v(" "),e("td",[t.$auth.can("pagos.consultar")||t.$auth.isAdmin()?e("v-tooltip",{attrs:{bottom:""}},[e("v-btn",{attrs:{slot:"activator",color:"info",fab:"",small:""},on:{click:function(e){return t.viewPDF(s.item)}},slot:"activator"},[e("v-icon",[t._v("$vuetify.icons.file")])],1),t._v(" "),e("span",[t._v("Ver constancia")])],1):t._e(),t._v(" "),t.$auth.user.user.dni==s.item.dni_user&&"creado"===s.item.estado?e("v-tooltip",{attrs:{bottom:""}},[e("v-btn",{attrs:{slot:"activator",color:"error",fab:"",small:""},on:{click:function(e){return t.deleteData(s.item)}},slot:"activator"},[e("v-icon",[t._v("$vuetify.icons.delete")])],1),t._v(" "),e("span",[t._v("Eliminar historial")])],1):t._e(),t._v(" "),t.$auth.user.user.dni==s.item.dni_user?e("v-tooltip",{attrs:{bottom:""}},[e("v-btn",{attrs:{slot:"activator",color:"primary",fab:"",small:""},on:{click:function(e){return t.certificadoEdit(s.item)}},slot:"activator"},[e("v-icon",[t._v("$vuetify.icons.edit")])],1),t._v(" "),e("span",[t._v("Editar certificado")])],1):t._e()],1)]}}])}),t._v(" "),e("div",{staticClass:"text-xs-center pt-2"})],1)],1),t._v(" "),e("modal-editar",{ref:"editarCertificado"})],1)}),[],!1,null,null,null);s.default=u.exports}}]);