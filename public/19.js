(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{67:function(t,e,s){"use strict";s.r(e);var r=s(206),a=s.n(r),i=s(214),o=s.n(i);function n(t,e,s,r,a,i,o){try{var n=t[i](o),l=n.value}catch(t){return void s(t)}n.done?e(l):Promise.resolve(l).then(r,a)}var l,c,u={data:function(){return{error:!1,uploading:!1,uploadFile:[],progress:0,errors:{}}},created:function(){this.$auth.can("importar.descuentos")||this.$auth.isAdmin()?document.title="Importar Haberes y Descuentos":this.$router.push("/admin/403")},methods:{sendFile:(l=a.a.mark((function t(){var e,s,r,i,n=this;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.$refs.file.files[0],(s=new FormData).append("archivo",e),t.prev=3,this.uploading=!0,t.next=7,axios.post("/importar/descuentos",s,{onUploadProgress:function(t){return n.progress=Math.round(100*t.loaded/t.total)}});case 7:r=t.sent,this.error=!1,this.uploadFile.push(e),this.uploading=!1,this.progress=0,1==r.data.import&&o.a.create("Mensaje del sistema",{body:"Archivo: ".concat(e.name," importado con éxito"),icon:"/img/LogoDREA.png",timeout:4e3,onClick:function(){window.focus(),this.close()}}),(i=r.data.msg)&&(this.resetInputFile(),this.$swal("Mensaje de operación",i,"info")),t.next=26;break;case 17:t.prev=17,t.t0=t.catch(3),this.errors=t.t0.response.data.errors,this.progress=0,this.error=!0,this.uploading=!1,this.uploadFile=[],t.t0=t.t0.response.data.message,"Undefined index: HABERES"!=t.t0&&"Undefined index: DESCUENTOS"!=t.t0||(this.$swal("Mensaje de operación","Las hojas HABERES y DESCUENTOS no exiten en el archivo.","info"),this.resetInputFile());case 26:case"end":return t.stop()}}),t,this,[[3,17]])})),c=function(){var t=this,e=arguments;return new Promise((function(s,r){var a=l.apply(t,e);function i(t){n(a,s,r,i,o,"next",t)}function o(t){n(a,s,r,i,o,"throw",t)}i(void 0)}))},function(){return c.apply(this,arguments)}),resetInputFile:function(){this.error=!1,this.uploading=!1,this.uploadFile=[],this.progress=0,this.errors={}}}},d=s(6),p=Object(d.a)(u,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",[s("v-layout",{staticClass:"mb-3",attrs:{row:"",wrap:""}},[s("v-flex",{attrs:{xs12:""}},[s("v-card",[s("v-container",{attrs:{"fill-height":"",fluid:""}},[s("v-layout",{attrs:{row:"",wrap:""}},[s("v-flex",{attrs:{xs12:""}},[s("span",{staticClass:"headline"},[t._v("Importar Haberes y Descuentos")]),t._v(" "),s("div",{staticClass:"body-1"},[t._v("Subir datos de los haberes y descuentos.")])])],1)],1)],1)],1)],1),t._v(" "),s("v-layout",{staticClass:"d-flex",attrs:{wrap:"","justify-center":""}},[s("v-flex",{attrs:{xs12:"",sm8:"",md6:""}},[s("v-card",[s("div",{staticClass:"dropzone"},[s("input",{ref:"file",staticClass:"input-file",attrs:{type:"file"},on:{change:t.sendFile}}),t._v(" "),t.uploading?t._e():s("p",{staticClass:"call-to-action"},[s("i",{staticClass:"mdi mdi-upload"}),t._v("\n            Seleccione un archivo Excel\n          ")]),t._v(" "),t.uploading?s("div",{staticClass:"progress-bar d-flex justify-center"},[s("v-progress-circular",{attrs:{rotate:360,size:100,width:15,value:t.progress,color:"teal"}},[t._v(t._s(t.progress))])],1):t._e()]),t._v(" "),100===t.progress?s("div",[s("p",{staticClass:"text-info"},[t._v("Subiendo los datos espere:")]),t._v(" "),s("div",{staticClass:"spinner"},[s("div",{staticClass:"rect1"}),t._v(" "),s("div",{staticClass:"rect2"}),t._v(" "),s("div",{staticClass:"rect3"}),t._v(" "),s("div",{staticClass:"rect4"}),t._v(" "),s("div",{staticClass:"rect5"})])]):t._e(),t._v(" "),t.error?s("v-alert",{attrs:{value:!0,type:"error"}},[t._v(t._s(t.errors.archivo[0]))]):t._e(),t._v(" "),t.uploadFile[0]?s("v-alert",{attrs:{value:!0,type:"success"}},[s("ul",{staticClass:"no-margin"},t._l(t.uploadFile,(function(e){return s("li",{key:e.name},[t._v("El archivo "+t._s(e.name)+" se subio con exito.")])})),0)]):t._e()],1)],1)],1)],1)}),[],!1,null,null,null);e.default=p.exports}}]);